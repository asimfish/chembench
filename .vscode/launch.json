{
    // 使用 IntelliSense 了解相关属性。 
    // 悬停以查看现有属性的描述。
    // 欲了解更多信息，请访问: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        // ============================================
        // 通用调试配置
        // ============================================
        {
            "name": "Python 调试程序: 当前文件",
            "type": "debugpy",
            "request": "launch",
            "program": "${file}",
            "console": "integratedTerminal"
        },
        
        {
            "name": "Image Diff Analysis",
            "type": "debugpy",
            "request": "launch",
            "program": "${workspaceFolder}/analyze_diff.py",
            "console": "integratedTerminal",
            "args": [
                "/home/psibot/chembench/analysis_results/透明试剂瓶(大)_可见/chest_camera_depth/depth_frame_0000.png",
                "/home/psibot/chembench/analysis_results/透明试剂瓶(大)_不可见/chest_camera_depth/depth_frame_0000.png",
                "--output",
                "diff_result.png"
            ]
        },

        // ============================================
        // Diffusion Policy 训练配置（新版）
        // 使用说明：修改 task/*.yaml 中的 object_name 和 num_demos
        // ============================================
        
        // RGBM任务训练 - 使用图像+Mask输入（修改 task/grasp_rgbm.yaml）
        {
            "name": "DP:Train-Grasp-RGBM",
            "type": "debugpy",
            "request": "launch",
            "program": "${workspaceFolder}/diffusion_policy/train.py",
            "console": "integratedTerminal",
            "args": [
                "--config-name",
                "train_diffusion_transformer_rgbm_workspace",
                "task=grasp_rgbm"
            ],
            "env": {
                "CUDA_VISIBLE_DEVICES": "6"
            },
            "justMyCode": false
        },
        
        // // RGB任务训练 - 使用图像输入（修改 task/grasp_rgb.yaml）
        // {
        //     "name": "DP:Train-Grasp-RGB",
        //     "type": "debugpy",
        //     "request": "launch",
        //     "program": "${workspaceFolder}/diffusion_policy/train.py",
        //     "console": "integratedTerminal",
        //     "args": [
        //         "--config-name",
        //         "train_diffusion_transformer_timm_workspace",
        //         "task=grasp_rgb"
        //     ],
        //     "env": {
        //         "CUDA_VISIBLE_DEVICES": "0"
        //     },
        //     "justMyCode": false
        // },
        // // State任务训练 - 仅使用状态输入（修改 task/grasp_state.yaml）
        // {
        //     "name": "DP:Train-Grasp-State",
        //     "type": "debugpy",
        //     "request": "launch",
        //     "program": "${workspaceFolder}/diffusion_policy/train.py",
        //     "console": "integratedTerminal",
        //     "args": [
        //         "--config-name",
        //         "train_diffusion_transformer_state_workspace",
        //         "task=grasp_state"
        //     ],
        //     "env": {
        //         "CUDA_VISIBLE_DEVICES": "1"
        //     },
        //     "justMyCode": false
        // },
        // // Handover RGB训练（修改 task/handover_rgb.yaml）
        // // {
        // //     "name": "DP:Train-Handover-RGB",
        //     "type": "debugpy",
        //     "request": "launch",
        //     "program": "${workspaceFolder}/diffusion_policy/train.py",
        //     "console": "integratedTerminal",
        //     "args": [
        //         "--config-name",
        //         "train_diffusion_transformer_timm_workspace",
        //         "task=handover_rgb"
        //     ],
        //     "env": {
        //         "CUDA_VISIBLE_DEVICES": "4"
        //     },
        //     "justMyCode": false
        // },
        // Handover State训练（修改 task/handover_state.yaml）
        // {
        //     "name": "DP:Train-Handover-State",
        //     "type": "debugpy",
        //     "request": "launch",
        //     "program": "${workspaceFolder}/diffusion_policy/train.py",
        //     "console": "integratedTerminal",
        //     "args": [
        //         "--config-name",
        //         "train_diffusion_transformer_state_workspace",
        //         "task=handover_state"
        //     ],
        //     "env": {
        //         "CUDA_VISIBLE_DEVICES": "4"
        //     },
        //     "justMyCode": false
        // },

        // // ============================================
        // // Diffusion Policy 旧版训练配置（保留兼容）
        // // ============================================
        // {
        //     "name": "DP:Train-Legacy",
        //     "type": "debugpy",
        //     "request": "launch",
        //     "program": "${workspaceFolder}/diffusion_policy/train.py",
        //     "console": "integratedTerminal",
        //     "args": [
        //         "--config-name",
        //         "train_diffusion_transformer_timm_single_demo_workspace",
        //     ],
        //     "env": {
        //         "CUDA_VISIBLE_DEVICES": "4"  // 指定 GPU，可改为 "1", "0,1" 等
        //     },
        //     "justMyCode": false
        // },
        // {
        //     "name": "DP:Grasp-Lego-Train-Legacy",
        //     "type": "debugpy",
        //     "request": "launch",
        //     "program": "${workspaceFolder}/diffusion_policy/train.py",
        //     "console": "integratedTerminal",
        //     "args": [
        //         "--config-name",
        //         "train_diffusion_transformer_grasp_lego_workspace",
        //     ],
        //     "env": {
        //         "CUDA_VISIBLE_DEVICES": "4"  // 指定 GPU，可改为 "1", "0,1" 等
        //     },
        //     "justMyCode": false
        // },

        // ============================================
        // IsaacSim 启动配置
        // ============================================
        {
            "name": "IsaacSim: Run",
            "type": "node-terminal",
            "request": "launch",
            "command": "./psilab/issacsim/run.sh"
        },

        
        {
            "name": "TP-Grasp-Param-Finder-v1:DataCollect",
            "type": "debugpy",
            "request": "launch",
            "args": [
                "--task",
                "Psi-TP-Grasp-Param-Finder-v1",
                "--num_envs",
                "1",
                "--seed",
                "17",
                "--scene",
                "room_cfg:PSI_DC_Grasp_CFG",
                "--enable_cameras",
                "--enable_output",
                "--enable_random",
                "--enable_eval",
                "--async_reset",
                "--sample_step",
                "4",
                "--max_episode",
                "100",
            ],
            "program": "${workspaceFolder}/psilab/scripts_psi/workflows/motion_planning/play.py",
            "console": "integratedTerminal",
            "justMyCode": false
        },

        // ============================================
        // Diffusion Policy 批量评估
        // 使用说明：编辑 eval_configs.yaml 配置要测试的模型
        // // ============================================
        // {
        //     "name": "IL-Batch-Eval",
        //     "type": "node-terminal",
        //     "request": "launch",
        //     "command": "cd ${workspaceFolder}/psilab/scripts_psi/workflows/imitation_learning && bash batch_eval_yaml.sh"
        // },

        // ============================================
        // Diffusion Policy 单次测试配置
        // 使用说明：
        //   - RGB模式: 使用图像+状态输入，需要 --enable_cameras
        //   - State模式: 仅使用状态输入，不需要相机
        //   - 修改 --checkpoint 为要测试的模型路径
        //   - 修改 --scene 为要测试的物体场景
        // ============================================
        // RGB模式测试
        // {
        //     "name": "IL-Eval-RGB",
        //     "type": "debugpy",
        //     "request": "launch",
        //     "args": [
        //         "--task",
        //         "Psi-IL-Grasp-Beaker-003-v1",
        //         "--num_envs",
        //         "1",
        //         "--seed",
        //         "17",
        //         "--scene",
        //         "room_cfg:PSI_DC_Beaker_003_CFG",  // 可选: PSI_DC_Beaker_002_CFG, PSI_DC_Beaker_005_CFG, PSI_DC_Crucible_CFG
        //         "--enable_cameras",
        //         "--async_reset",
        //         "--checkpoint",
        //         "/home/psibot/chembench/data/outputs/grasp_rgb/100ml玻璃烧杯/xxx/checkpoints/latest.ckpt",
        //         "--max_step",
        //         "500",
        //         "--max_episode",
        //         "100",
        //         "--enable_eval",
        //     ],
        //     "program": "${workspaceFolder}/psilab/scripts_psi/workflows/imitation_learning/play.py",
        //     "console": "integratedTerminal",
        //     "justMyCode": false
        // },
        // State模式测试
        // {
        //     "name": "IL-Eval-State",
        //     "type": "debugpy",
        //     "request": "launch",
        //     "args": [
        //         "--task",
        //         "Psi-IL-Grasp-Beaker-003-State-v1",  // State模式的task
        //         "--num_envs",
        //         "1",
        //         "--seed",
        //         "17",
        //         "--scene",
        //         "room_cfg:PSI_DC_Beaker_003_CFG",
        //         "--async_reset",
        //         "--checkpoint",
        //         "/home/psibot/chembench/data/outputs/grasp_state/100ml玻璃烧杯/xxx/checkpoints/latest.ckpt",
        //         "--max_step",
        //         "500",
        //         "--max_episode",
        //         "100",
        //         "--enable_eval",
        //     ],
        //     "program": "${workspaceFolder}/psilab/scripts_psi/workflows/imitation_learning/play.py",
        //     "console": "integratedTerminal",
        //     "justMyCode": false
        // },
        // // 旧版RGB测试（保留）
        // {
        //     "name": "IL-Grasp-v1:Play",
        //     "type": "debugpy",
        //     "request": "launch",
        //     "args": [
        //         "--task",
        //         "Psi-IL-Grasp-v1",
        //         "--num_envs",
        //         "1",
        //         "--seed",
        //         "17",
        //         "--scene",
        //         "room_cfg:PSI_DC_Grasp_CFG",
        //         "--enable_cameras",
        //         "--async_reset",
        //         // "--headless",
        //         "--checkpoint",
        //         // "/home/psibot/chembench/data/outputs/download/grasp_rgb/100ml玻璃透明_state/epoch=4990-train_loss=0.003.ckpt",
        //         // "/home/psibot/chembench/data/outputs/download/grasp_rgb/1225/100ml玻璃烧杯_黑色_无速度_rgb+normal+depth/20251224_170156_n50_rgbnd/checkpoints/epoch=4130-train_loss=0.003.ckpt",
        //         // "/home/psibot/chembench/data/outputs/download/grasp_rgb/1225/100ml玻璃烧杯_无速度_normal+depth/20251224_181826_n50_nd/checkpoints/epoch=4290-train_loss=0.002.ckpt",
        //         "/home/psibot/chembench/data/outputs/download/1227maskrgb/棕色试剂瓶大_无速度_rgb_masked/20251226_225828_n50_rgb_masked/checkpoints/epoch=5920-train_loss=0.002.ckpt",
        //         // "/home/psibot/chembench/data/outputs/download/grasp_rgb/1225_rbg/black_beaker_rgb_no_vel.ckpt",
        //         // "/home/psibot/chembench/data/outputs/download/grasp_rgb/采集/烧杯纯图/epoch=4910-train_loss=0.002.ckpt",
        //         "--max_step",
        //         "500",
        //         "--max_episode",
        //         "100",
        //         "--enable_eval",
        //     ],
        //     "program": "${workspaceFolder}/psilab/scripts_psi/workflows/imitation_learning/play.py",
        //     "console": "integratedTerminal",
        //     "justMyCode": false
        // },
        // "/home/psibot/chembench/data/download/final_real/model/grasp_rgbm_latest/part1/第一批_250ml棕色容量瓶_带第三人称相机_nd_4通道/20251231_171525_n50_nd/latest.ckpt",
        // ============================================
        // Motion Planning 数据收集配置
        // ============================================
    
        // {
        //     "name": "MP-Grasp-Art-v1:DataCollect",
        //     "type": "debugpy",
        //     "request": "launch",
        //     "args": [
        //         "--task",
        //         "Psi-MP-Grasp-Art-v1",
        //         "--num_envs",
        //         "1",
        //         "--seed",
        //         "17",
        //         "--scene",
        //         "room_cfg:PSI_DC_Grasp_Art_CFG",
        //         "--enable_cameras",
        //         "--enable_output",
        //         "--enable_random",
        //         "--enable_eval",
        //         "--async_reset",
        //         "--sample_step",
        //         "4",
        //         "--max_episode",
        //         "500",
        //     ],
        //     "program": "${workspaceFolder}/psilab/scripts_psi/workflows/motion_planning/play.py",
        //     "console": "integratedTerminal",
        //     "justMyCode": false
        // },
        // // ============================================
        // 数据处理工具
        // ============================================
        {
            "name": "MP-Handover-v1:DataCollect",
            "type": "debugpy",
            "request": "launch",
            "args": [
                "--task",
                "Psi-MP-Handover-v1",
                "--num_envs",
                "1",
                "--seed",
                "17",
                "--scene",
                "room_cfg:PSI_DC_Handover_CFG",
                "--enable_cameras",
                "--enable_output",
                "--enable_random",
                "--enable_eval",
                "--enable_marker",
                "--async_reset",
                "--sample_step",
                "4",
                "--max_episode",
                "500",
            ],
            "program": "${workspaceFolder}/psilab/scripts_psi/workflows/motion_planning/play.py",
            "console": "integratedTerminal",
            "justMyCode": false
        },




        {
            "name": "MP-PickPlace-v1:DataCollect",
            "type": "debugpy",
            "request": "launch",
            "args": [
                "--task",
                "Psi-MP-PickPlace-v1",
                "--num_envs",
                "1",
                "--seed",
                "17",
                "--scene",
                "room_cfg:PSI_DC_PickPlace_CFG",
                "--enable_cameras",
                "--enable_output",
                "--enable_random",
                "--enable_eval",
                "--enable_marker",
                "--async_reset",
                "--sample_step",
                "4",
                "--max_episode",
                "500",
            ],
            "program": "${workspaceFolder}/psilab/scripts_psi/workflows/motion_planning/play.py",
            "console": "integratedTerminal",
            "justMyCode": false
        },

        // Zarr 数据分析（生成可视化曲线图）
        {
            "name": "Analyze Zarr Data",
            "type": "debugpy",
            "request": "launch",
            "args": [
                "--path",
                "/home/psibot/chembench/data/zarr_final/motion_plan/grasp/100ml玻璃烧杯_20251231_150804.zarr"
            ],
            "program": "${workspaceFolder}/analyze_zarr.py",
            "console": "integratedTerminal",
            "justMyCode": false
        },
        {
            "name": "IL-Grasp-v1:Play",
            "type": "debugpy",
            "request": "launch",
            "args": [
                "--task",
                "Psi-IL-Grasp-v1",
                // "Psi-IL-PickPlace-v1",
                "--num_envs",
                "20",
                "--seed",
                "17",
                "--scene",
                // "room_cfg:PSI_DC_PickPlace_CFG",
                "room_cfg:PSI_DC_Grasp_CFG",
                "--enable_cameras",
                "--async_reset",
                "--enable_eval",
                "--enable_random",
                // "--headless",
                "--checkpoint",
                "/home/psibot/chembench/act/2026.01.08/05.59.45_DP3_grasp_500ml_clear_volumetric/checkpoints/latest.ckpt",
                // "/home/psibot/chembench/data/outputs/download/grasp_rgb/100ml玻璃透明_state/epoch=4990-train_loss=0.003.ckpt",
                // "/home/psibot/chembench/data/outputs/download/grasp_rgb/1225/100ml玻璃烧杯_黑色_无速度_rgb+normal+depth/20251224_170156_n50_rgbnd/checkpoints/epoch=4130-train_loss=0.003.ckpt",
                // "/home/psibot/chembench/data/outputs/download/grasp_rgb/1225/100ml玻璃烧杯_无速度_normal+depth/20251224_181826_n50_nd/checkpoints/epoch=4290-train_loss=0.002.ckpt",
                // "/home/psibot/chembench/data/tmp/100ml烧杯_nd.ckpt",
                // "/home/psibot/chembench/data/outputs/download/grasp_rgb/1225_rbg/black_beaker_rgb_no_vel.ckpt",
                // "/home/psibot/chembench/data/outputs/download/grasp_rgb/采集/烧杯纯图/epoch=4910-train_loss=0.002.ckpt",
                "--max_step",
                "500",
                "--max_episode",
                "100",
                "--enable_eval",
            ],
            "program": "${workspaceFolder}/psilab/scripts_psi/workflows/imitation_learning/play.py",
            "console": "integratedTerminal",
            "justMyCode": false
        },

        {
            // ACT 评估 - 6通道模式（RGB + RGB_masked）
            "name": "ACT:Eval-Grasp-100ml-Beaker-6Channel",
            "type": "debugpy",
            "request": "launch",
            "args": [
                "--task",
                "Psi-IL-Grasp-ACT-v1",
                "--num_envs",
                "1",
                "--seed",
                "42",
                "--scene",
                "room_cfg:PSI_DC_Grasp_CFG",
                "--enable_cameras",
                "--async_reset",
                "--enable_eval",
                "--enable_random",
                "--checkpoint",
                "/home/psibot/chembench/act/chunk_other/grasp_beaker_kl10_chunk15_bs64_lr1e5_hd512_20260108_181056/policy_best.ckpt",
                "--max_step",
                "500",
                "--max_episode",
                "100",
                "--obs_mode",
                "rgb_masked_rgb",  // 6通道：RGB + RGB_masked（你的模型）
                "--camera_names",
                "chest_camera",
                "head_camera",
                "third_camera",
                "--num_queries",
                "15",
                "--temporal_agg",
                "true",
                "--mask_mode",
                "real",
            ],
            "program": "${workspaceFolder}/psilab/scripts_psi/workflows/imitation_learning/play.py",
            "console": "integratedTerminal",
            "justMyCode": false,
            "env": {
                "CUDA_VISIBLE_DEVICES": "0"
            }
        },

        {
            "name": "MP-Grasp-v1:DataCollect",
            "type": "debugpy",
            "request": "launch",
            "args": [
                "--task",
                "Psi-MP-Grasp-v1",
                "--num_envs",
                "1",
                "--seed",
                "17",
                "--scene",
                "room_cfg:PSI_DC_Grasp_CFG",
                "--enable_cameras",
                "--enable_output",
                "--enable_random",
                "--enable_eval",
                "--async_reset",
                "--sample_step",
                "4",
                "--max_episode",
                "500",
            ],
            "program": "${workspaceFolder}/psilab/scripts_psi/workflows/motion_planning/play.py",
            "console": "integratedTerminal",
            "justMyCode": false
        },

        {
            "name": "Replay",
            "type": "debugpy",
            "request": "launch",
            "args": [
                "--enable_cameras",
                "--hdf5_file_folder",
                "/home/psibot/chembench/data/motion_plan/grasp/50ml玻璃烧杯/20260104_043014",
                "--enable_state"
            ],
            "program": "${workspaceFolder}/psilab/scripts_psi/workflows/replay/replay.py",
            "console": "integratedTerminal",
            "justMyCode": false
        },
        
        // {
        //     "name": "HDF5 Convert",
        //     "type": "debugpy",
        //     "request": "launch",
        //     "args": [
        //         "--source",
        //         "${workspaceFolder}/psilab/outputs/source_data",
        //         "--destination",
        //         "${workspaceFolder}/psilab/outputs/converted_data",
        //     ],
        //     "program": "${workspaceFolder}/psilab/scripts_psi/tools/hdf5/convert_hdf5.py",
        //     "console": "integratedTerminal",
        //     "justMyCode": false
        // },
        // // ============================================
        // HDF5 to Zarr 数据转换
        {
            "name": "HDF5 to Zarr (RGB+Mask+PointCloud+GT)",
            "type": "debugpy",
            "request": "launch",
            "args": [
                "--h5_dir",
                "/home/psibot/chembench/data/motion_plan/grasp/100ml玻璃烧杯/20260107_164121",
                "--zarr_dir",
                "${workspaceFolder}/data/zarr_gt_point",
                "--mode",
                "rgb",
                "--with_mask",
                "--with_depth",
                "--with_normals",
                "--task_type",
                "single_hand",
                "--max_episodes",
                "50",
                "--with_pointcloud",  // 包含相机点云和Ground Truth点云
                "--num_points",
                "2048",
                // "--save_rgb_separate",
                // "--save_mask_separate"
            ],
            "program": "${workspaceFolder}/psilab/source/psilab/psilab/utils/zarr_utils.py",
            "console": "integratedTerminal",
            "justMyCode": false
        },

        // ============================================
        // 抓取点生成器
        // 使用说明：
        //   - 修改 --object 为物体ID (如 glass_beaker_100ml)
        //   - 修改 --task 为任务类型 (grasp/handover/pour 等)
        //   - 修改 --num_points 为要生成的点数 (4/6/8/12)
        //   - 使用 --all 生成所有变体
        //   - 使用 --debug 显示可视化
        //   - 使用 --dry_run 预览不写入
        // ============================================
        // 生成单个点数配置
        {
            "name": "GraspPoints: Generate",
            "type": "debugpy",
            "request": "launch",
            "args": [
                "--object",
                "glass_beaker_100ml",  // 物体ID，可选: glass_beaker_250ml, glass_beaker_500ml 等
                "--task",
                "grasp",               // 任务类型
                "--num_points",
                "4",                   // 生成的点数
                "--debug"              // 显示可视化
            ],
            "program": "${workspaceFolder}/psilab/source/psilab_tasks/psilab_tasks/imitation_learning/grasp_point_generator.py",
            "console": "integratedTerminal",
            "justMyCode": false
        },
        // 生成所有变体 (4/6/8/12点)
        // {
        //     "name": "GraspPoints: Generate All",
        //     "type": "debugpy",
        //     "request": "launch",
        //     "args": [
        //         "--object",
        //         "glass_beaker_100ml",  // 物体ID
        //         "--task",
        //         "grasp",               // 任务类型
        //         "--all",               // 生成所有变体
        //         "--debug"              // 显示可视化
        //     ],
        //     "program": "${workspaceFolder}/psilab/source/psilab_tasks/psilab_tasks/imitation_learning/grasp_point_generator.py",
        //     "console": "integratedTerminal",
        //     "justMyCode": false
        // },
        // 预览模式（不写入文件）
        // {
        //     "name": "GraspPoints: Preview (Dry Run)",
        //     "type": "debugpy",
        //     "request": "launch",
        //     "args": [
        //         "--object",
        //         "glass_beaker_100ml",
        //         "--task",
        //         "grasp",
        //         "--num_points",
        //         "8",
        //         "--debug",
        //         "--dry_run"            // 预览模式，不写入文件
        //     ],
        //     "program": "${workspaceFolder}/psilab/source/psilab_tasks/psilab_tasks/imitation_learning/grasp_point_generator.py",
        //     "console": "integratedTerminal",
        //     "justMyCode": false
        // },
        // 列出所有物体
        // {
        //     "name": "GraspPoints: List Objects",
        //     "type": "debugpy",
        //     "request": "launch",
        //     "args": [
        //         "--list_objects"
        //     ],
        //     "program": "${workspaceFolder}/psilab/source/psilab_tasks/psilab_tasks/imitation_learning/grasp_point_generator.py",
        //     "console": "integratedTerminal",
        //     "justMyCode": false
        // },

        // ============================================
        // 批量数据采集配置
        // ============================================
        {
            "name": "Batch Data Collection: Grasp (专用脚本)",
            "type": "debugpy",
            "request": "launch",
            "args": [
                "--config",
                "${workspaceFolder}/collect/objects_config.yaml"
                // "--no-headless",  // 取消注释以显示 GUI
                // "--wait-time", "15",  // 取消注释以自定义等待时间
            ],
            "program": "${workspaceFolder}/collect/batch_data_collection.py",
            "console": "integratedTerminal",
            "justMyCode": false
        },

        {
            "name": "Batch Data Collection: Pick & Place",
            "type": "debugpy",
            "request": "launch",
            "args": [
                "--task",
                "pick_place",
                "--config",
                "${workspaceFolder}/collect/objects_config_pick_place.yaml",
                "--wait-time",
                "25"
                // "--objects", "mortar", "glass_beaker_100ml",  // 取消注释以只采集特定物体
                // "--no-cleanup",  // 取消注释以禁用自动清理（调试用）
                // "--dry-run",  // 取消注释以只显示计划不执行
            ],
            "program": "${workspaceFolder}/collect/batch_data_collection_universal.py",
            "console": "integratedTerminal",
            "justMyCode": false
        },

        {
            "name": "Batch Data Collection: Grasp (通用脚本)",
            "type": "debugpy",
            "request": "launch",
            "args": [
                "--task",
                "grasp",
                "--config",
                "${workspaceFolder}/collect/objects_config.yaml",
                "--wait-time",
                "20"
                // "--objects", "mortar",  // 取消注释以只采集特定物体
                // "--no-cleanup",  // 取消注释以禁用自动清理（调试用）
            ],
            "program": "${workspaceFolder}/collect/batch_data_collection_universal.py",
            "console": "integratedTerminal",
            "justMyCode": false
        },

        {
            "name": "Batch Data Collection: Handover",
            "type": "debugpy",
            "request": "launch",
            "args": [
                "--task",
                "handover",
                "--config",
                "${workspaceFolder}/collect/objects_config_handover.yaml",
                "--wait-time",
                "30",
                // "--no-headless",  // 取消注释以显示 GUI
                // "--objects", "clear_volumetric_flask_500ml",  // 取消注释以只采集特定物体
                // "--no-cleanup",  // 取消注释以禁用自动清理（调试用）
                // "--dry-run",  // 取消注释以只显示计划不执行
            ],
            "program": "${workspaceFolder}/collect/batch_data_collection_universal.py",
            "console": "integratedTerminal",
            "justMyCode": false
        },

        // ============================================
        // 批量测试配置
        // ============================================
        {
            "name": "Batch-Test-Universal",
            "type": "debugpy",
            "request": "launch",
            "args": [
                "--config",
                "${workspaceFolder}/test/test_config.yaml",
                // "--tasks", "100ml_beaker_nd",  // 取消注释以只测试特定任务
                // "--no-cleanup",  // 取消注释以禁用自动清理（调试用）
                // "--wait-time", "15",  // 取消注释以修改任务间等待时间
                // "--dry-run",  // 取消注释以只显示计划不执行
            ],
            "program": "${workspaceFolder}/test/batch_test_universal.py",
            "console": "integratedTerminal",
            "justMyCode": false
        },

        // ============================================
        // 点云真值提取
        // ============================================
        {
            "name": "Extract Ground Truth Pointcloud (原始点云)",
            "type": "debugpy",
            "request": "launch",
            "program": "${workspaceFolder}/extract_ground_truth_pointcloud.py",
            "console": "integratedTerminal",
            "args": [
                "--usd",
                "${workspaceFolder}/psilab/assets/usd/asset_collection/sim_ready/solid_assets/glass_beaker_100ml/Beaker003.usd",
                "--num-points",
                "2048",
                "--output",
                "${workspaceFolder}/data/test_beaker_pointcloud.zarr",
                "--no-transform",  // 只输出原始点云（不应用pose）
                // "--visualize",  // 取消注释以可视化
            ],
            "justMyCode": false,
            "env": {
                "PYTHONPATH": "${workspaceFolder}/psilab/source/psilab:${workspaceFolder}/psilab/source/psilab_tasks:${env:PYTHONPATH}"
            }
        },
        {
            "name": "Extract Ground Truth Pointcloud (带变换)",
            "type": "debugpy",
            "request": "launch",
            "program": "${workspaceFolder}/extract_ground_truth_pointcloud.py",
            "console": "integratedTerminal",
            "args": [
                "--usd",
                "/home/psibot/chembench/psilab/assets/usd/asset_collection/sim_ready/solid_assets/clear_reagent_bottle_large/ReagentBottle002.usd",
                "--zarr",
                "/home/psibot/chembench/data/zarr_point_cloud/motion_plan/grasp/透明试剂瓶(大).zarr",
                "--num-points",
                "2048",
                "--output",
                "/home/psibot/chembench/data/zarr_point_cloud/motion_plan/grasp/透明试剂瓶(大)_ground_truth.zarr",
                "--quat-order",
                "wxyz",  // 四元数顺序：wxyz 或 xyzw
                // "--root-prim",
                // "/World/Object",  // 可选：指定root坐标系
                // "--convert-to-meters",  // 可选：使用USD metersPerUnit转换
                // "--stream-to-zarr",  // 可选：流式写入（长序列推荐）
                // "--visualize",  // 取消注释以可视化轨迹
                // "--skip-frames",
                // "50",
            ],
            "justMyCode": false,
            "env": {
                "PYTHONPATH": "${workspaceFolder}/psilab/source/psilab:${workspaceFolder}/psilab/source/psilab_tasks:${env:PYTHONPATH}"
            }
        },



        // ============================================
        // 真值点云可视化
        // ============================================
        {
            "name": "Visualize GT Pointcloud - Static",
            "type": "debugpy",
            "request": "launch",
            "program": "${workspaceFolder}/visualize_ground_truth_pointcloud.py",
            "console": "integratedTerminal",
            "args": [
                "--zarr",
                "/home/psibot/chembench/data/zarr_gt_point_1024/motion_plan/grasp/500ml透明容量瓶_20260108_231319.zarr",
                "--mode",
                "static",
                // "--frames", "0", "500", "1000", "1500",  // 取消注释以指定帧
                // "--save", "pointcloud_static.png",  // 取消注释以保存图片
            ],
            "justMyCode": false
        },

        {
            "name": "Visualize GT Pointcloud - Animation",
            "type": "debugpy",
            "request": "launch",
            "program": "${workspaceFolder}/visualize_ground_truth_pointcloud.py",
            "console": "integratedTerminal",
            "args": [
                "--zarr",
                "/home/psibot/chembench/data/zarr_gt_point/motion_plan/grasp/100ml玻璃烧杯_20260106_023356.zarr",
                "--mode",
                "animation",
                "--skip_frames",
                "2",
                // "--save", "pointcloud_animation.gif",  // 取消注释以保存动画
            ],
            "justMyCode": false
        },

        {
            "name": "Visualize GT Pointcloud - Trajectory",
            "type": "debugpy",
            "request": "launch",
            "program": "${workspaceFolder}/visualize_ground_truth_pointcloud.py",
            "console": "integratedTerminal",
            "args": [
                "--zarr",
                "/home/psibot/chembench/data/zarr_final_point_cloud/motion_plan/grasp/100ml玻璃烧杯.zarr",
                "--mode",
                "trajectory",
                "--sample_rate",
                "100",
            ],
            "justMyCode": false
        },

        {
            "name": "Visualize GT Pointcloud - Open3D",
            "type": "debugpy",
            "request": "launch",
            "program": "${workspaceFolder}/visualize_ground_truth_pointcloud.py",
            "console": "integratedTerminal",
            "args": [
                "--zarr",
                "/home/psibot/chembench/data/zarr_point_cloud/motion_plan/grasp/100ml玻璃烧杯.zarr",
                "--mode",
                "open3d",
                // "--frames", "0", "500", "1000", "1500", "2621",  // 取消注释以指定帧
            ],
            "justMyCode": false
        },

        {
            "name": "Visualize GT Pointcloud - Compare with Camera",
            "type": "debugpy",
            "request": "launch",
            "program": "${workspaceFolder}/visualize_ground_truth_pointcloud.py",
            "console": "integratedTerminal",
            "args": [
                "--zarr",
                "/home/psibot/chembench/data/zarr_gt_point/motion_plan/grasp/100ml玻璃烧杯.zarr",
                "--mode",
                "compare",
                "--frames",
                "520",  // 修改帧索引
            ],
            "justMyCode": false
        },
        {
            "name": "Visualize GT Pointcloud - Dynamic Compare",
            "type": "debugpy",
            "request": "launch",
            "program": "${workspaceFolder}/visualize_ground_truth_pointcloud.py",
            "console": "integratedTerminal",
            "args": [
                "--zarr",
                "/home/psibot/chembench/data/zarr_gt_point/motion_plan/grasp/100ml玻璃烧杯_20260106_025457.zarr",
                "--mode",
                "compare_animation",  // 新模式：动态对比
                "--skip_frames",
                "2",  // 跳帧数
                // "--save", "pointcloud_compare_animation.gif",  // 保存动画
            ],
            "justMyCode": false
        },

        // ============================================
        // 相机点云可视化
        // ============================================
        {
            "name": "Visualize Camera Pointcloud - Single",
            "type": "debugpy",
            "request": "launch",
            "program": "${workspaceFolder}/visualize_camera_pointcloud.py",
            "console": "integratedTerminal",
            "args": [
                "--zarr",
                "/home/psibot/chembench/data/zarr_final_point_cloud/motion_plan/grasp/100ml玻璃烧杯.zarr",
                "--mode",
                "single",
                "--camera",
                "chest_camera_pointcloud",  // chest_camera_pointcloud, head_camera_pointcloud, third_camera_pointcloud
                "--frames",
                "0",
                "--use_rgb",  // 取消注释以使用RGB颜色
                // "--save", "camera_pointcloud.png",
            ],
            "justMyCode": false
        },

        {
            "name": "Visualize Camera Pointcloud - All Cameras",
            "type": "debugpy",
            "request": "launch",
            "program": "${workspaceFolder}/visualize_camera_pointcloud.py",
            "console": "integratedTerminal",
            "args": [
                "--zarr",
                "/home/psibot/chembench/data/zarr_point_cloud/motion_plan/grasp/100ml玻璃烧杯.zarr",
                "--mode",
                "all",
                "--frames",
                "0",
                "--use_rgb",  // 使用RGB颜色
                // "--save", "all_cameras.png",
            ],
            "justMyCode": false
        },

        {
            "name": "Visualize Camera Pointcloud - Animation",
            "type": "debugpy",
            "request": "launch",
            "program": "${workspaceFolder}/visualize_camera_pointcloud.py",
            "console": "integratedTerminal",
            "args": [
                "--zarr",
                "/home/psibot/chembench/data/zarr_final_point_cloud/motion_plan/grasp/100ml玻璃烧杯.zarr",
                "--mode",
                "animation",
                "--camera",
                "chest_camera_pointcloud",
                "--skip_frames",
                "1",
                // "--use_rgb",
                // "--save", "camera_animation.gif",
            ],
            "justMyCode": false
        },

        {
            "name": "Visualize Camera Pointcloud - Compare with GT",
            "type": "debugpy",
            "request": "launch",
            "program": "${workspaceFolder}/visualize_camera_pointcloud.py",
            "console": "integratedTerminal",
            "args": [
                "--zarr",
                "/home/psibot/chembench/data/zarr_point_cloud/motion_plan/grasp/100ml玻璃烧杯.zarr",
                "--mode",
                "compare",
                "--camera",
                "chest_camera_pointcloud",
                "--frames",
                "0",
                "--use_rgb",
            ],
            "justMyCode": false
        },

        {
            "name": "Visualize Camera Pointcloud - Open3D",
            "type": "debugpy",
            "request": "launch",
            "program": "${workspaceFolder}/visualize_camera_pointcloud.py",
            "console": "integratedTerminal",
            "args": [
                "--zarr",
                "/home/psibot/chembench/data/zarr_point_cloud/motion_plan/grasp/100ml玻璃烧杯.zarr",
                "--mode",
                "open3d",
                "--camera",
                "chest_camera_pointcloud",
                "--frames",
                "0", "500", "1000", "1500",
                "--use_rgb",
            ],
            "justMyCode": false
        },

        // ============================================
        // OpenVLA 评估配置（参考 LIBERO 评估风格）
        // ⚠️ 注意事项：
        //    1. 需要先安装 draccus: cd psilab/source/isaaclab && ./isaaclab.sh -p -m pip install draccus
        //    2. 必须使用 Isaac Lab 的 Python 环境运行
        //    3. 详细说明见：psilab/source/psilab_tasks/psilab_tasks/imitation_learning/grasp/RUN_OPENVLA.md
        // 
        // 推荐运行方式（在终端中）：
        //    cd /home/psibot/chembench
        //    ./run_openvla_grasp_eval.sh --model_family openvla --pretrained_checkpoint /path/to/checkpoint --task_config config.yaml --max_episode 50
        // ============================================

        // OpenVLA 评估 - RGB 模式
        // ⚠️ 由于 Isaac Lab 环境限制，建议在终端运行：./run_openvla_grasp_eval.sh
        {
            "name": "OpenVLA:Eval-Grasp-RGB (Terminal)",
            "type": "node-terminal",
            "request": "launch",
            "command": "cd /home/psibot/chembench && ./run_openvla_grasp_eval.sh --model_family openvla --pretrained_checkpoint /home/psibot/chembench/data/dp3/openvla-7b-model+chembench_grasp100mlbeaker+b16+lr-0.0005+lora-r32+dropout-0.0 --task_config config_grasp.yaml --obs_mode rgb --max_episode 50 --center_crop True --device cuda:0",
            "cwd": "${workspaceFolder}"
        },

        // OpenVLA 评估 - 快速测试（10 episodes）
        {
            "name": "OpenVLA:Eval-Quick-Test (Terminal)",
            "type": "node-terminal",
            "request": "launch",
            "command": "cd /home/psibot/chembench && ./run_openvla_grasp_eval.sh --model_family openvla --pretrained_checkpoint /home/psibot/chembench/data/dp3/openvla-7b-model+chembench_grasp100mlbeaker+b16+lr-0.0005+lora-r32+dropout-0.0 --task_config config_grasp.yaml --obs_mode rgb --max_episode 10 --center_crop True --run_id_note 'quick-test'",
            "cwd": "${workspaceFolder}"
        },

        // OpenVLA 评估 - 8-bit 量化（节省显存）
        {
            "name": "OpenVLA:Eval-8bit-Quant (Terminal)",
            "type": "node-terminal",
            "request": "launch",
            "command": "cd /home/psibot/chembench && ./run_openvla_grasp_eval.sh --model_family openvla --pretrained_checkpoint /home/psibot/chembench/data/dp3/openvla-7b-model+chembench_grasp100mlbeaker+b16+lr-0.0005+lora-r32+dropout-0.0 --task_config config_grasp.yaml --obs_mode rgb --max_episode 50 --center_crop True --load_in_8bit --device cuda:0",
            "cwd": "${workspaceFolder}"
        },

    ]
}
